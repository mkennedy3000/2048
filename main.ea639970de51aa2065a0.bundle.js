webpackJsonp([2],{519:function(t,e){e.HmrState=function(){}},520:function(t,e){"use strict";var i=function(){function t(t,e,i){this.array=t,this._width=e,this._height=i}return t.withRows=function(e){var i=e[0].length,n=e.length;return new t(e.reduce(function(t,e){return t.concat(e)},[]),i,n)},t.withCols=function(e){return t.withRows(e.reverse()).rotate90()},t.prototype.transpose=function(){var e=this,i=this.array.map(function(t,i){return e.get(e.rowNum(i),e.colNum(i))},this);return new t(i,this.width,this.height)},t.prototype.flipX=function(){return t.withRows(this.rows().map(function(t){return t.reverse()}))},t.prototype.flipY=function(){return t.withCols(this.cols().map(function(t){return t.reverse()}))},t.prototype.rotate90=function(){return this.transpose().flipX()},t.prototype.rotate180=function(){return this.flipY().flipX()},t.prototype.rotate270=function(){return this.transpose().flipY()},t.prototype.get=function(t,e){return this.array[this.pos(t,e)]},Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numRows",{get:function(){return this.height},enumerable:!0,configurable:!0}),t.prototype.rows=function(){var t=this;return this.array.reduce(function(e,i,n){return e[t.rowNum(n)].push(i),e},Array.from(new Array(this.numRows),function(){return[]}))},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numCols",{get:function(){return this.width},enumerable:!0,configurable:!0}),t.prototype.cols=function(){var t=this;return this.array.reduce(function(e,i,n){return e[t.colNum(n)].push(i),e},Array.from(new Array(this.numCols),function(){return[]}))},t.prototype.pos=function(t,e){return e*this.width+t},t.prototype.rowNum=function(t){return(t-this.colNum(t))/this.numCols},t.prototype.colNum=function(t){return t%this.numRows},t}();e.Grid=i},495:function(t,e,i){"use strict";var n=i(1),r=i(232),o=i(496),s=i(352),a=function(){function t(t,e){this.appState=t,this.stateService=e,this.name="2048",this.newGame()}return t.prototype.newGame=function(){this.state=this.stateService.getNewGameState()},t=__decorate([n.Component({selector:"app",encapsulation:n.ViewEncapsulation.None,directives:[o.BoardComponent],providers:[s.StateService],template:'\n    <div class="ui centered grid container">\n        <div class="sixteen wide column">\n            <div class="ui padded basic segment">\n                <h1 class="ui header">{{name}}</h1>\n            </div>\n            <div class="ui button" (click)="newGame()">New Game</div>\n            <div class="ui hidden divider"></div>\n            <board [state]="state"></board>\n        </div>\n    </div>\n  '}),__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof r.AppState&&r.AppState)&&e||Object,"function"==typeof(i="undefined"!=typeof s.StateService&&s.StateService)&&i||Object])],t);var e,i}();e.App=a},232:function(t,e,i){"use strict";var n=i(1),r=i(519),o=function(){function t(){this._state={}}return Object.defineProperty(t.prototype,"state",{get:function(){return this._state=this._clone(this._state)},set:function(t){throw new Error("do not mutate the `.state` directly")},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=this.state;return e.hasOwnProperty(t)?e[t]:e},t.prototype.set=function(t,e){return this._state[t]=e},t.prototype._clone=function(t){return JSON.parse(JSON.stringify(t))},__decorate([r.HmrState(),__metadata("design:type",Object)],t.prototype,"_state",void 0),t=__decorate([n.Injectable(),__metadata("design:paramtypes",[])],t)}();e.AppState=o},685:function(t,e){t.exports="board{display:inline-block;width:400px;height:400px}"},496:function(t,e,i){"use strict";var n=i(1),r=i(497),o=i(351),s=i(352),a=function(){function t(t){this.stateService=t}return t.prototype.slideTiles=function(t){switch(t){case 37:this.slideLeft();break;case 38:this.slideUp();break;case 39:this.slideRight();break;case 40:this.slideDown()}},t.prototype.slideLeft=function(){this.state=this.stateService.slideLeft(this.state)},t.prototype.slideRight=function(){this.state=this.stateService.slideRight(this.state)},t.prototype.slideUp=function(){this.state=this.stateService.slideUp(this.state)},t.prototype.slideDown=function(){this.state=this.stateService.slideDown(this.state)},__decorate([n.Input(),__metadata("design:type","function"==typeof(e="undefined"!=typeof o.State&&o.State)&&e||Object)],t.prototype,"state",void 0),__decorate([n.HostListener("document:keydown",["$event.keyCode"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],t.prototype,"slideTiles",null),__decorate([n.HostListener("swipeleft"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],t.prototype,"slideLeft",null),__decorate([n.HostListener("swiperight"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],t.prototype,"slideRight",null),__decorate([n.HostListener("swipeup"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],t.prototype,"slideUp",null),__decorate([n.HostListener("swipedown"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],t.prototype,"slideDown",null),t=__decorate([n.Component({selector:"board",encapsulation:n.ViewEncapsulation.None,directives:[r.TileComponent],template:'\n        <div class="ui grid">\n            <div class="four column row" *ngFor="let row of state.grid.rows()">\n                <div class="grey column" *ngFor="let tile of row">\n                    <tile [tile]="tile"></tile>\n                </div>\n            </div>\n        </div>\n    ',styles:[i(685)]}),__metadata("design:paramtypes",["function"==typeof(a="undefined"!=typeof s.StateService&&s.StateService)&&a||Object])],t);var e,a}();e.BoardComponent=a},686:function(t,e){t.exports="tile{position:absolute;display:block;width:72px;height:72px;line-height:36px}"},497:function(t,e,i){"use strict";var n=i(1),r=i(350),o=function(){function t(){}return t.prototype.ngOnChanges=function(){this.updateColor()},t.prototype.updateColor=function(){var t;switch(this.tile.value){case 0:t="brown";break;case 2:t="blue";break;case 4:t="teal";break;case 8:t="yellow";break;case 16:t="blue stacked";break;case 32:t="teal stacked";break;case 64:t="yellow stacked";break;case 128:t="blue tall stacked";break;case 256:t="teal tall stacked";break;case 512:t="yellow tall stacked";break;case 1024:t="orange tall stacked";break;default:t="red tall stacked"}this.class="ui "+t+" inverted segment"},__decorate([n.Input(),__metadata("design:type","function"==typeof(e="undefined"!=typeof r.Tile&&r.Tile)&&e||Object)],t.prototype,"tile",void 0),__decorate([n.HostBinding("class"),__metadata("design:type",String)],t.prototype,"class",void 0),t=__decorate([n.Component({selector:"tile",encapsulation:n.ViewEncapsulation.None,template:'<span *ngIf="!tile.isEmpty()">{{tile.value}}</span>',styles:[i(686)]}),__metadata("design:paramtypes",[])],t);var e}();e.TileComponent=o},350:function(t,e){"use strict";var i=function(){function t(t,e,i,n){this.value=t,this.x=e,this.y=i,this.merged=n,this.merged=!!n}return t.prototype.isEmpty=function(){return this.value<=0},t}();e.Tile=i},498:function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}n(i(495)),n(i(232));var r=i(232);e.APP_PROVIDERS=[r.AppState]},351:function(t,e){"use strict";var i=function(){function t(){this.score=0}return t}();e.State=i},352:function(t,e,i){"use strict";var n=i(1),r=i(351),o=i(499),s=i(350),a=i(520),u=function(){function t(){this.BOARD_WIDTH=4,this.BOARD_HEIGHT=4}return t.prototype.getNewGameState=function(){var t=this,e=new r.State,i=Array.from({length:this.BOARD_WIDTH*this.BOARD_HEIGHT},function(e,i){return new s.Tile(0,i%t.BOARD_WIDTH,Math.floor(i/t.BOARD_WIDTH))});return e.grid=new a.Grid(i,this.BOARD_WIDTH,this.BOARD_HEIGHT),this.addRandomTiles(e,2)},t.prototype.addRandomTiles=function(t,e){return 0===e?t:this.addRandomTiles(this.addRandomTile(t),e-1)},t.prototype.addRandomTile=function(t){var e;if(!t.grid.rows().some(function(t){return t.some(function(t){return t.isEmpty()})}))return t;do e=t.grid.get(this.getRandomInt(0,t.grid.width),this.getRandomInt(0,t.grid.height));while(!e.isEmpty());return e.value=this.getRandomInt(0,4)>0?2:4,t},t.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},t.prototype.slideLeft=function(t){var e=this,i=new r.State;return i.grid=a.Grid.withRows(t.grid.rows().map(function(t){return e.slideTilesLeft(t)})),this.addRandomTile(i)},t.prototype.slideRight=function(t){var e=this,i=new r.State;return i.grid=a.Grid.withRows(t.grid.rows().map(function(t){return e.slideTilesLeft(t.reverse()).reverse()})),this.addRandomTile(i)},t.prototype.slideUp=function(t){var e=this,i=new r.State;return i.grid=a.Grid.withCols(t.grid.cols().map(function(t){return e.slideTilesLeft(t)})),this.addRandomTile(i)},t.prototype.slideDown=function(t){var e=this,i=new r.State;return i.grid=a.Grid.withCols(t.grid.cols().map(function(t){return e.slideTilesLeft(t.reverse()).reverse()})),this.addRandomTile(i)},t.prototype.slideTilesLeft=function(t){for(var e=t,i=1;i<=t.length;i++)e=this.slideTileLeft(e.slice(0,i)).concat(e.slice(i));return e.map(function(t){return t.merged=!1,t})},t.prototype.slideTileLeft=function(t){return this.slideTileRight(t.reverse()).reverse()},t.prototype.slideTileRight=function(t){if(t.length<=1)return t;var e=this.mergeTiles(new o.Pair(t[0],t[1])),i=t.slice(1);i[0]=e.right;var n=this.slideTileRight(i);return n.unshift(e.left),n},t.prototype.mergeTiles=function(t){var e=t.left,i=t.right;return i.isEmpty()?new o.Pair(new s.Tile(0,e.x,e.y),new s.Tile(e.value,i.x,i.y)):e.value!=i.value||i.isEmpty()||e.merged||i.merged?t:new o.Pair(new s.Tile(0,e.x,e.y),new s.Tile(2*i.value,i.x,i.y,(!0)))},t=__decorate([n.Injectable(),__metadata("design:paramtypes",[])],t)}();e.StateService=u},499:function(t,e){"use strict";var i=function(){function t(t,e){this.left=t,this.right=e}return t}();e.Pair=i},0:function(t,e,i){"use strict";function n(t){return r.bootstrap(c.App,o.PLATFORM_PROVIDERS.concat(s.ENV_PROVIDERS,c.APP_PROVIDERS,[a.provide(u.HAMMER_GESTURE_CONFIG,{useClass:d})])).then(s.decorateComponentRef).catch(function(t){return console.error(t)})}var r=i(336),o=i(500),s=i(501),a=i(1),u=i(106),c=i(498),d=function(t){function e(){t.apply(this,arguments),this.overrides={swipe:{direction:Hammer.DIRECTION_ALL}}}return __extends(e,t),e}(u.HammerGestureConfig);e.MyHammerConfig=d,e.main=n;document.addEventListener("DOMContentLoaded",function(){return n()})},353:function(t,e,i){"use strict";var n=i(1),r=i(207);e.APPLICATION_DIRECTIVES=r.REACTIVE_FORM_DIRECTIVES.slice(),e.DIRECTIVES=[{provide:n.PLATFORM_DIRECTIVES,multi:!0,useValue:e.APPLICATION_DIRECTIVES}]},354:function(t,e,i){"use strict";var n=i(1);e.APPLICATION_PIPES=[],e.PIPES=[{provide:n.PLATFORM_PIPES,multi:!0,useValue:e.APPLICATION_PIPES}]},355:function(t,e,i){"use strict";var n=i(328),r=i(207);e.APPLICATION_PROVIDERS=[r.disableDeprecatedForms(),r.provideForms()].concat(n.HTTP_PROVIDERS),e.PROVIDERS=e.APPLICATION_PROVIDERS.slice()},500:function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}n(i(353)),n(i(354)),n(i(355));var r=i(353),o=i(354),s=i(355);e.PLATFORM_PROVIDERS=s.PROVIDERS.concat(r.DIRECTIVES,o.PIPES)},501:function(t,e,i){"use strict";var n=i(106),r=i(1),o=[],s=function(t){return t};n.disableDebugTools(),r.enableProdMode(),o=o.slice(),e.decorateComponentRef=s,e.ENV_PROVIDERS=o.slice()}});
//# sourceMappingURL=main.ea639970de51aa2065a0.bundle.map